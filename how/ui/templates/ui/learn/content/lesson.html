{% extends 'ui/learn/base.html' %}{% load i18n wagtailcore_tags %}

<!---->
{% block title %}{{ block.super }} | {{ lesson.title }}{% endblock %}

<!---->
{% block course_title %}{{ lesson }}{% endblock %}

<!---->
{% block breadcrumbs %}
<li>
  <a href="{% url 'ui:course' module.get_parent.slug %}">
    <i data-lucide="home" class="size-4"></i>
    <span>{% trans 'Home' %}</span>
  </a>
</li>
<li>
  <a href="{% url 'ui:module' module.get_parent.slug module.slug %}">
    <i data-lucide="book" class="size-4"></i>
    <span>{{ module }}</span>
  </a>
</li>
<li>
  <span>
    <i data-lucide="presentation" class="size-4"></i>
    <span>{{ lesson }}</span>
  </span>
</li>
{% endblock %}

<!---->
{% block course_content %}
<div
  class="prose mx-auto prose-sm prose-video:rounded-box xl:prose-lg 2xl:prose-xl prose-headings:text-primary prose-headings:font-serif rtl:prose-headings:font-kufi prose-img:rounded-box prose-img:w-full prose-pre:bg-base-200 prose-pre:border prose-pre:border-base-300"
>
  <h1>{{ lesson }}</h1>
  {{ lesson.description|richtext }}
</div>
{% endblock %}

<!---->
{% block drawer_title %}{{ lesson }}{% endblock %}

<!---->
{% block drawer_content %}
<li>
  <a
    href="{% url 'ui:course' module.get_parent.slug %}"
    class="btn btn-sm btn-soft btn-primary md:btn-md btn-block 2xl:btn-xl justify-start"
  >
    <i data-lucide="home" class="size-4 md:size-6 xl:size-7 2xl:size-8"></i>
    <span>{% trans 'Home' %}</span>
  </a>
</li>
<li>
  <a
    href="{% url 'ui:module' module.get_parent.slug module.slug %}"
    class="btn btn-sm btn-soft btn-primary md:btn-md btn-block 2xl:btn-xl justify-start"
  >
    <i data-lucide="book" class="size-4 md:size-6 xl:size-7 2xl:size-8"></i>
    <span>{{ module }}</span>
  </a>
</li>
<li>
  <div class="rounded-field collapse w-full">
    <input id="lesson-{{ lesson.id }}" type="checkbox" class="hidden" />

    <label
      for="lesson-{{ lesson.id }}"
      class="collapse-title btn btn-sm btn-soft btn-primary md:btn-md btn-block 2xl:btn-xl justify-between p-4"
    >
      <span class="flex items-center gap-[inherit]">
        <i
          data-lucide="book-audio"
          class="size-4 md:size-6 xl:size-7 2xl:size-8"
        ></i>
        <span>{% trans 'Lesson Material' %}</span>
      </span>

      <i
        data-lucide="chevron-down"
        class="size-4 md:size-6 xl:size-7 2xl:size-8"
      ></i>
    </label>

    <div class="collapse-content">
      <ol class="grid gap-2">
        {% for item in lesson.get_children.specific %}
        <li>
          {% if item.content_type.name == 'item' %}
          <a
            href="{% url 'ui:item' module.get_parent.slug module.slug lesson.slug item.slug %}"
            class="btn btn-sm btn-soft btn-primary md:btn-md btn-block 2xl:btn-xl justify-start"
          >
            <i
              data-lucide="book-text"
              class="size-4 md:size-6 xl:size-7 2xl:size-8"
            ></i>
            <span>{{ item }}</span>
          </a>
          {% else %}
          <a
            href="{% url 'ui:assignment' module.get_parent.slug item.slug %}"
            class="btn btn-sm btn-soft btn-primary md:btn-md btn-block 2xl:btn-xl justify-start"
          >
            <i
              data-lucide="book-check"
              class="size-4 md:size-6 xl:size-7 2xl:size-8"
            ></i>
            <span>{{ item }}</span>
          </a>
          {% endif %}
        </li>
        {% endfor %}
      </ol>
    </div>
  </div>
</li>
{% endblock %}
